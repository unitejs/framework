"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Tests for ArrayHelper.
 */
const Chai = require("chai");
const arrayHelper_1 = require("../../../../dist/helpers/arrayHelper");
describe("ArrayHelper", () => {
    it("can be created", () => {
        const obj = new arrayHelper_1.ArrayHelper();
        Chai.should().exist(obj);
    });
    describe("addRemove", () => {
        it("can fail when called with null", () => {
            Chai.expect(arrayHelper_1.ArrayHelper.addRemove(null, null, true)).to.equal(undefined);
        });
        it("can fail when called with undefined", () => {
            Chai.expect(arrayHelper_1.ArrayHelper.addRemove(undefined, undefined, true)).to.equal(undefined);
        });
        it("can fail when called with an array and no key", () => {
            const arr = [1, 2, 3];
            arrayHelper_1.ArrayHelper.addRemove(arr, undefined, true);
            Chai.expect(arr).to.deep.equal([1, 2, 3]);
        });
        it("can add the item if not existing", () => {
            const arr = [1, 2];
            arrayHelper_1.ArrayHelper.addRemove(arr, 3, true);
            Chai.expect(arr).to.deep.equal([1, 2, 3]);
        });
        it("can not add the item if already exists", () => {
            const arr = [1, 2, 3];
            arrayHelper_1.ArrayHelper.addRemove(arr, 3, true);
            Chai.expect(arr).to.deep.equal([1, 2, 3]);
        });
        it("can remove the item if existing", () => {
            const arr = [1, 2, 3];
            arrayHelper_1.ArrayHelper.addRemove(arr, 3, false);
            Chai.expect(arr).to.deep.equal([1, 2]);
        });
        it("can not remove the item if not existing", () => {
            const arr = [1, 2];
            arrayHelper_1.ArrayHelper.addRemove(arr, 3, false);
            Chai.expect(arr).to.deep.equal([1, 2]);
        });
        it("can add the item if not existing with matcher", () => {
            const arr = [{ id: 1 }, { id: 2 }];
            arrayHelper_1.ArrayHelper.addRemove(arr, { id: 3 }, true, (object, item) => object.id === item.id);
            Chai.expect(arr).to.deep.equal([{ id: 1 }, { id: 2 }, { id: 3 }]);
        });
        it("can not add the item if already exists with matcher", () => {
            const arr = [{ id: 1 }, { id: 2 }, { id: 3 }];
            arrayHelper_1.ArrayHelper.addRemove(arr, { id: 3 }, true, (object, item) => object.id === item.id);
            Chai.expect(arr).to.deep.equal([{ id: 1 }, { id: 2 }, { id: 3 }]);
        });
        it("can remove the item if existing with matcher", () => {
            const arr = [{ id: 1 }, { id: 2 }, { id: 3 }];
            arrayHelper_1.ArrayHelper.addRemove(arr, { id: 3 }, false, (object, item) => object.id === item.id);
            Chai.expect(arr).to.deep.equal([{ id: 1 }, { id: 2 }]);
        });
        it("can not remove the item if not existing with matcher", () => {
            const arr = [{ id: 1 }, { id: 2 }];
            arrayHelper_1.ArrayHelper.addRemove(arr, { id: 3 }, false, (object, item) => object.id === item.id);
            Chai.expect(arr).to.deep.equal([{ id: 1 }, { id: 2 }]);
        });
    });
    describe("merge", () => {
        it("can do nothing when called with null", () => {
            Chai.expect(arrayHelper_1.ArrayHelper.merge(null, null)).to.equal(null);
        });
        it("can do nothing when called with undefined", () => {
            Chai.expect(arrayHelper_1.ArrayHelper.merge(undefined, undefined)).to.equal(undefined);
        });
        it("can return second array when called with undefined first array", () => {
            Chai.expect(arrayHelper_1.ArrayHelper.merge(undefined, [1, 2, 3])).to.deep.equal([1, 2, 3]);
        });
        it("can return first array when called with undefined second array", () => {
            Chai.expect(arrayHelper_1.ArrayHelper.merge([1, 2, 3], undefined)).to.deep.equal([1, 2, 3]);
        });
        it("can return combined when called with two arrays", () => {
            Chai.expect(arrayHelper_1.ArrayHelper.merge([1, 2, 3], [4, 5, 6])).to.deep.equal([1, 2, 3, 4, 5, 6]);
        });
        it("can return combined when called with two arrays and duplicates", () => {
            Chai.expect(arrayHelper_1.ArrayHelper.merge([1, 2, 3], [2, 3, 4])).to.deep.equal([1, 2, 3, 4]);
        });
        it("can return combined when called with a complex sub array first array shorter", () => {
            const obj1 = [
                { m: true, n: [1, 2] }
            ];
            const obj2 = [
                { m: true, n: [2, 3] },
                { m: true, n: [4, 5] }
            ];
            Chai.expect(arrayHelper_1.ArrayHelper.merge(obj1, obj2))
                .to.deep.equal([
                { m: true, n: [1, 2, 3] },
                { m: true, n: [4, 5] }
            ]);
        });
        it("can return combined when called with a complex sub array second array shorter", () => {
            const obj1 = [
                { m: true, n: [1, 2] },
                { m: true, n: [2, 3] }
            ];
            const obj2 = [
                { m: true, n: [4, 5] }
            ];
            Chai.expect(arrayHelper_1.ArrayHelper.merge(obj1, obj2))
                .to.deep.equal([
                { m: true, n: [1, 2, 4, 5] },
                { m: true, n: [2, 3] }
            ]);
        });
    });
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Rlc3QvdW5pdC9zcmMvaGVscGVycy9hcnJheUhlbHBlci5zcGVjLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUE7O0dBRUc7QUFDSCw2QkFBNkI7QUFDN0IscUVBQWtFO0FBRWxFLFFBQVEsQ0FBQyxhQUFhLEVBQUUsR0FBRyxFQUFFO0lBQ3pCLEVBQUUsQ0FBQyxnQkFBZ0IsRUFBRSxHQUFHLEVBQUU7UUFDdEIsTUFBTSxHQUFHLEdBQUcsSUFBSSx5QkFBVyxFQUFFLENBQUM7UUFDOUIsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUM3QixDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxXQUFXLEVBQUUsR0FBRyxFQUFFO1FBQ3ZCLEVBQUUsQ0FBQyxnQ0FBZ0MsRUFBRSxHQUFHLEVBQUU7WUFDdEMsSUFBSSxDQUFDLE1BQU0sQ0FBQyx5QkFBVyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUM3RSxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxxQ0FBcUMsRUFBRSxHQUFHLEVBQUU7WUFDM0MsSUFBSSxDQUFDLE1BQU0sQ0FBQyx5QkFBVyxDQUFDLFNBQVMsQ0FBQyxTQUFTLEVBQUUsU0FBUyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUN2RixDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQywrQ0FBK0MsRUFBRSxHQUFHLEVBQUU7WUFDckQsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ3RCLHlCQUFXLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRSxTQUFTLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDNUMsSUFB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LE1BQU0sR0FBRyxHQUFHLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUM5Qyx5QkFBVyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLEVBQUUsS0FBSyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDckYsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN0RSxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyw4Q0FBOEMsRUFBRSxHQUFHLEVBQUU7WUFDcEQsTUFBTSxHQUFHLEdBQUcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQzlDLHlCQUFXLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsRUFBRSxLQUFLLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUN0RixJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQzNELENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLHNEQUFzRCxFQUFFLEdBQUcsRUFBRTtZQUM1RCxNQUFNLEdBQUcsR0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDbkMseUJBQVcsQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLEtBQUssRUFBRSxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEtBQUssSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3RGLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDM0QsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFO1FBQ25CLEVBQUUsQ0FBQyxzQ0FBc0MsRUFBRSxHQUFHLEVBQUU7WUFDNUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyx5QkFBVyxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzlELENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLDJDQUEyQyxFQUFFLEdBQUcsRUFBRTtZQUNqRCxJQUFJLENBQUMsTUFBTSxDQUFDLHlCQUFXLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFBRSxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDN0UsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsZ0VBQWdFLEVBQUUsR0FBRyxFQUFFO1lBQ3RFLElBQUksQ0FBQyxNQUFNLENBQUMseUJBQVcsQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbEYsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsZ0VBQWdFLEVBQUUsR0FBRyxFQUFFO1lBQ3RFLElBQUksQ0FBQyxNQUFNLENBQUMseUJBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbEYsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsaURBQWlELEVBQUUsR0FBRyxFQUFFO1lBQ3ZELElBQUksQ0FBQyxNQUFNLENBQUMseUJBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDM0YsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsZ0VBQWdFLEVBQUUsR0FBRyxFQUFFO1lBQ3RFLElBQUksQ0FBQyxNQUFNLENBQUMseUJBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3JGLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLDhFQUE4RSxFQUFFLEdBQUcsRUFBRTtZQUNwRixNQUFNLElBQUksR0FBRztnQkFDVCxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFO2FBQ3pCLENBQUM7WUFDRixNQUFNLElBQUksR0FBRztnQkFDVCxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFO2dCQUN0QixFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFO2FBQ3pCLENBQUM7WUFDRixJQUFJLENBQUMsTUFBTSxDQUFDLHlCQUFXLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztpQkFDckMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7Z0JBQ1gsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7Z0JBQ3pCLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7YUFDekIsQ0FBQyxDQUFDO1FBQ1gsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsK0VBQStFLEVBQUUsR0FBRyxFQUFFO1lBQ3JGLE1BQU0sSUFBSSxHQUFHO2dCQUNULEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7Z0JBQ3RCLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7YUFDekIsQ0FBQztZQUNGLE1BQU0sSUFBSSxHQUFHO2dCQUNULEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7YUFDekIsQ0FBQztZQUNGLElBQUksQ0FBQyxNQUFNLENBQUMseUJBQVcsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO2lCQUNyQyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztnQkFDWCxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7Z0JBQzVCLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7YUFDekIsQ0FBQyxDQUFDO1FBQ1gsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMsQ0FBQyxDQUFDIiwiZmlsZSI6ImhlbHBlcnMvYXJyYXlIZWxwZXIuc3BlYy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGVzdHMgZm9yIEFycmF5SGVscGVyLlxuICovXG5pbXBvcnQgKiBhcyBDaGFpIGZyb20gXCJjaGFpXCI7XG5pbXBvcnQgeyBBcnJheUhlbHBlciB9IGZyb20gXCIuLi8uLi8uLi8uLi9zcmMvaGVscGVycy9hcnJheUhlbHBlclwiO1xuXG5kZXNjcmliZShcIkFycmF5SGVscGVyXCIsICgpID0+IHtcbiAgICBpdChcImNhbiBiZSBjcmVhdGVkXCIsICgpID0+IHtcbiAgICAgICAgY29uc3Qgb2JqID0gbmV3IEFycmF5SGVscGVyKCk7XG4gICAgICAgIENoYWkuc2hvdWxkKCkuZXhpc3Qob2JqKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKFwiYWRkUmVtb3ZlXCIsICgpID0+IHtcbiAgICAgICAgaXQoXCJjYW4gZmFpbCB3aGVuIGNhbGxlZCB3aXRoIG51bGxcIiwgKCkgPT4ge1xuICAgICAgICAgICAgQ2hhaS5leHBlY3QoQXJyYXlIZWxwZXIuYWRkUmVtb3ZlKG51bGwsIG51bGwsIHRydWUpKS50by5lcXVhbCh1bmRlZmluZWQpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcImNhbiBmYWlsIHdoZW4gY2FsbGVkIHdpdGggdW5kZWZpbmVkXCIsICgpID0+IHtcbiAgICAgICAgICAgIENoYWkuZXhwZWN0KEFycmF5SGVscGVyLmFkZFJlbW92ZSh1bmRlZmluZWQsIHVuZGVmaW5lZCwgdHJ1ZSkpLnRvLmVxdWFsKHVuZGVmaW5lZCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwiY2FuIGZhaWwgd2hlbiBjYWxsZWQgd2l0aCBhbiBhcnJheSBhbmQgbm8ga2V5XCIsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFyciA9IFsxLCAyLCAzXTtcbiAgICAgICAgICAgIEFycmF5SGVscGVyLmFkZFJlbW92ZShhcnIsIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgICAgICAgICBDaGFpLmV4cGVjdChhcnIpLnRvLmRlZXAuZXF1YWwoWzEsIDIsIDNdKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJjYW4gYWRkIHRoZSBpdGVtIGlmIG5vdCBleGlzdGluZ1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhcnIgPSBbMSwgMl07XG4gICAgICAgICAgICBBcnJheUhlbHBlci5hZGRSZW1vdmUoYXJyLCAzLCB0cnVlKTtcbiAgICAgICAgICAgIENoYWkuZXhwZWN0KGFycikudG8uZGVlcC5lcXVhbChbMSwgMiwgM10pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcImNhbiBub3QgYWRkIHRoZSBpdGVtIGlmIGFscmVhZHkgZXhpc3RzXCIsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFyciA9IFsxLCAyLCAzXTtcbiAgICAgICAgICAgIEFycmF5SGVscGVyLmFkZFJlbW92ZShhcnIsIDMsIHRydWUpO1xuICAgICAgICAgICAgQ2hhaS5leHBlY3QoYXJyKS50by5kZWVwLmVxdWFsKFsxLCAyLCAzXSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwiY2FuIHJlbW92ZSB0aGUgaXRlbSBpZiBleGlzdGluZ1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhcnIgPSBbMSwgMiwgM107XG4gICAgICAgICAgICBBcnJheUhlbHBlci5hZGRSZW1vdmUoYXJyLCAzLCBmYWxzZSk7XG4gICAgICAgICAgICBDaGFpLmV4cGVjdChhcnIpLnRvLmRlZXAuZXF1YWwoWzEsIDJdKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJjYW4gbm90IHJlbW92ZSB0aGUgaXRlbSBpZiBub3QgZXhpc3RpbmdcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYXJyID0gWzEsIDJdO1xuICAgICAgICAgICAgQXJyYXlIZWxwZXIuYWRkUmVtb3ZlKGFyciwgMywgZmFsc2UpO1xuICAgICAgICAgICAgQ2hhaS5leHBlY3QoYXJyKS50by5kZWVwLmVxdWFsKFsxLCAyXSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwiY2FuIGFkZCB0aGUgaXRlbSBpZiBub3QgZXhpc3Rpbmcgd2l0aCBtYXRjaGVyXCIsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFyciA9IFt7IGlkOiAxIH0sIHsgaWQ6IDIgfV07XG4gICAgICAgICAgICBBcnJheUhlbHBlci5hZGRSZW1vdmUoYXJyLCB7IGlkOiAzIH0sIHRydWUsIChvYmplY3QsIGl0ZW0pID0+IG9iamVjdC5pZCA9PT0gaXRlbS5pZCk7XG4gICAgICAgICAgICBDaGFpLmV4cGVjdChhcnIpLnRvLmRlZXAuZXF1YWwoW3sgaWQ6IDEgfSwgeyBpZDogMiB9LCB7IGlkOiAzIH1dKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJjYW4gbm90IGFkZCB0aGUgaXRlbSBpZiBhbHJlYWR5IGV4aXN0cyB3aXRoIG1hdGNoZXJcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYXJyID0gW3sgaWQ6IDEgfSwgeyBpZDogMiB9LCB7IGlkOiAzIH1dO1xuICAgICAgICAgICAgQXJyYXlIZWxwZXIuYWRkUmVtb3ZlKGFyciwgeyBpZDogMyB9LCB0cnVlLCAob2JqZWN0LCBpdGVtKSA9PiBvYmplY3QuaWQgPT09IGl0ZW0uaWQpO1xuICAgICAgICAgICAgQ2hhaS5leHBlY3QoYXJyKS50by5kZWVwLmVxdWFsKFt7IGlkOiAxIH0sIHsgaWQ6IDIgfSwgeyBpZDogMyB9XSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwiY2FuIHJlbW92ZSB0aGUgaXRlbSBpZiBleGlzdGluZyB3aXRoIG1hdGNoZXJcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYXJyID0gW3sgaWQ6IDEgfSwgeyBpZDogMiB9LCB7IGlkOiAzIH1dO1xuICAgICAgICAgICAgQXJyYXlIZWxwZXIuYWRkUmVtb3ZlKGFyciwgeyBpZDogMyB9LCBmYWxzZSwgKG9iamVjdCwgaXRlbSkgPT4gb2JqZWN0LmlkID09PSBpdGVtLmlkKTtcbiAgICAgICAgICAgIENoYWkuZXhwZWN0KGFycikudG8uZGVlcC5lcXVhbChbeyBpZDogMSB9LCB7IGlkOiAyIH1dKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJjYW4gbm90IHJlbW92ZSB0aGUgaXRlbSBpZiBub3QgZXhpc3Rpbmcgd2l0aCBtYXRjaGVyXCIsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFyciA9IFt7IGlkOiAxIH0sIHsgaWQ6IDIgfV07XG4gICAgICAgICAgICBBcnJheUhlbHBlci5hZGRSZW1vdmUoYXJyLCB7IGlkOiAzIH0sIGZhbHNlLCAob2JqZWN0LCBpdGVtKSA9PiBvYmplY3QuaWQgPT09IGl0ZW0uaWQpO1xuICAgICAgICAgICAgQ2hhaS5leHBlY3QoYXJyKS50by5kZWVwLmVxdWFsKFt7IGlkOiAxIH0sIHsgaWQ6IDIgfV0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKFwibWVyZ2VcIiwgKCkgPT4ge1xuICAgICAgICBpdChcImNhbiBkbyBub3RoaW5nIHdoZW4gY2FsbGVkIHdpdGggbnVsbFwiLCAoKSA9PiB7XG4gICAgICAgICAgICBDaGFpLmV4cGVjdChBcnJheUhlbHBlci5tZXJnZShudWxsLCBudWxsKSkudG8uZXF1YWwobnVsbCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwiY2FuIGRvIG5vdGhpbmcgd2hlbiBjYWxsZWQgd2l0aCB1bmRlZmluZWRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgQ2hhaS5leHBlY3QoQXJyYXlIZWxwZXIubWVyZ2UodW5kZWZpbmVkLCB1bmRlZmluZWQpKS50by5lcXVhbCh1bmRlZmluZWQpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcImNhbiByZXR1cm4gc2Vjb25kIGFycmF5IHdoZW4gY2FsbGVkIHdpdGggdW5kZWZpbmVkIGZpcnN0IGFycmF5XCIsICgpID0+IHtcbiAgICAgICAgICAgIENoYWkuZXhwZWN0KEFycmF5SGVscGVyLm1lcmdlKHVuZGVmaW5lZCwgWzEsIDIsIDNdKSkudG8uZGVlcC5lcXVhbChbMSwgMiwgM10pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcImNhbiByZXR1cm4gZmlyc3QgYXJyYXkgd2hlbiBjYWxsZWQgd2l0aCB1bmRlZmluZWQgc2Vjb25kIGFycmF5XCIsICgpID0+IHtcbiAgICAgICAgICAgIENoYWkuZXhwZWN0KEFycmF5SGVscGVyLm1lcmdlKFsxLCAyLCAzXSwgdW5kZWZpbmVkKSkudG8uZGVlcC5lcXVhbChbMSwgMiwgM10pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcImNhbiByZXR1cm4gY29tYmluZWQgd2hlbiBjYWxsZWQgd2l0aCB0d28gYXJyYXlzXCIsICgpID0+IHtcbiAgICAgICAgICAgIENoYWkuZXhwZWN0KEFycmF5SGVscGVyLm1lcmdlKFsxLCAyLCAzXSwgWzQsIDUsIDZdKSkudG8uZGVlcC5lcXVhbChbMSwgMiwgMywgNCwgNSwgNl0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcImNhbiByZXR1cm4gY29tYmluZWQgd2hlbiBjYWxsZWQgd2l0aCB0d28gYXJyYXlzIGFuZCBkdXBsaWNhdGVzXCIsICgpID0+IHtcbiAgICAgICAgICAgIENoYWkuZXhwZWN0KEFycmF5SGVscGVyLm1lcmdlKFsxLCAyLCAzXSwgWzIsIDMsIDRdKSkudG8uZGVlcC5lcXVhbChbMSwgMiwgMywgNF0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcImNhbiByZXR1cm4gY29tYmluZWQgd2hlbiBjYWxsZWQgd2l0aCBhIGNvbXBsZXggc3ViIGFycmF5IGZpcnN0IGFycmF5IHNob3J0ZXJcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb2JqMSA9IFtcbiAgICAgICAgICAgICAgICB7IG06IHRydWUsIG46IFsxLCAyXSB9XG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgY29uc3Qgb2JqMiA9IFtcbiAgICAgICAgICAgICAgICB7IG06IHRydWUsIG46IFsyLCAzXSB9LFxuICAgICAgICAgICAgICAgIHsgbTogdHJ1ZSwgbjogWzQsIDVdIH1cbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBDaGFpLmV4cGVjdChBcnJheUhlbHBlci5tZXJnZShvYmoxLCBvYmoyKSlcbiAgICAgICAgICAgICAgICAudG8uZGVlcC5lcXVhbChbXG4gICAgICAgICAgICAgICAgICAgIHsgbTogdHJ1ZSwgbjogWzEsIDIsIDNdIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgbTogdHJ1ZSwgbjogWzQsIDVdIH1cbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJjYW4gcmV0dXJuIGNvbWJpbmVkIHdoZW4gY2FsbGVkIHdpdGggYSBjb21wbGV4IHN1YiBhcnJheSBzZWNvbmQgYXJyYXkgc2hvcnRlclwiLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvYmoxID0gW1xuICAgICAgICAgICAgICAgIHsgbTogdHJ1ZSwgbjogWzEsIDJdIH0sXG4gICAgICAgICAgICAgICAgeyBtOiB0cnVlLCBuOiBbMiwgM10gfVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGNvbnN0IG9iajIgPSBbXG4gICAgICAgICAgICAgICAgeyBtOiB0cnVlLCBuOiBbNCwgNV0gfVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIENoYWkuZXhwZWN0KEFycmF5SGVscGVyLm1lcmdlKG9iajEsIG9iajIpKVxuICAgICAgICAgICAgICAgIC50by5kZWVwLmVxdWFsKFtcbiAgICAgICAgICAgICAgICAgICAgeyBtOiB0cnVlLCBuOiBbMSwgMiwgNCwgNV0gfSxcbiAgICAgICAgICAgICAgICAgICAgeyBtOiB0cnVlLCBuOiBbMiwgM10gfVxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuIl19
