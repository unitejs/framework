"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Tests for ArrayHelper.
 */
const Chai = require("chai");
const arrayHelper_1 = require("../../../../dist/helpers/arrayHelper");
describe("ArrayHelper", () => {
    it("can be created", () => {
        const obj = new arrayHelper_1.ArrayHelper();
        Chai.should().exist(obj);
    });
    describe("addRemove", () => {
        it("can fail when called with null", () => {
            Chai.expect(arrayHelper_1.ArrayHelper.addRemove(null, null, true)).to.equal(undefined);
        });
        it("can fail when called with undefined", () => {
            Chai.expect(arrayHelper_1.ArrayHelper.addRemove(undefined, undefined, true)).to.equal(undefined);
        });
        it("can fail when called with an array and no key", () => {
            const arr = [1, 2, 3];
            arrayHelper_1.ArrayHelper.addRemove(arr, undefined, true);
            Chai.expect(arr).to.deep.equal([1, 2, 3]);
        });
        it("can add the item if not existing", () => {
            const arr = [1, 2];
            arrayHelper_1.ArrayHelper.addRemove(arr, 3, true);
            Chai.expect(arr).to.deep.equal([1, 2, 3]);
        });
        it("can not add the item if already exists", () => {
            const arr = [1, 2, 3];
            arrayHelper_1.ArrayHelper.addRemove(arr, 3, true);
            Chai.expect(arr).to.deep.equal([1, 2, 3]);
        });
        it("can remove the item if existing", () => {
            const arr = [1, 2, 3];
            arrayHelper_1.ArrayHelper.addRemove(arr, 3, false);
            Chai.expect(arr).to.deep.equal([1, 2]);
        });
        it("can not remove the item if not existing", () => {
            const arr = [1, 2];
            arrayHelper_1.ArrayHelper.addRemove(arr, 3, false);
            Chai.expect(arr).to.deep.equal([1, 2]);
        });
        it("can add the item if not existing with matcher", () => {
            const arr = [{ id: 1 }, { id: 2 }];
            arrayHelper_1.ArrayHelper.addRemove(arr, { id: 3 }, true, (object, item) => object.id === item.id);
            Chai.expect(arr).to.deep.equal([{ id: 1 }, { id: 2 }, { id: 3 }]);
        });
        it("can not add the item if already exists with matcher", () => {
            const arr = [{ id: 1 }, { id: 2 }, { id: 3 }];
            arrayHelper_1.ArrayHelper.addRemove(arr, { id: 3 }, true, (object, item) => object.id === item.id);
            Chai.expect(arr).to.deep.equal([{ id: 1 }, { id: 2 }, { id: 3 }]);
        });
        it("can remove the item if existing with matcher", () => {
            const arr = [{ id: 1 }, { id: 2 }, { id: 3 }];
            arrayHelper_1.ArrayHelper.addRemove(arr, { id: 3 }, false, (object, item) => object.id === item.id);
            Chai.expect(arr).to.deep.equal([{ id: 1 }, { id: 2 }]);
        });
        it("can not remove the item if not existing with matcher", () => {
            const arr = [{ id: 1 }, { id: 2 }];
            arrayHelper_1.ArrayHelper.addRemove(arr, { id: 3 }, false, (object, item) => object.id === item.id);
            Chai.expect(arr).to.deep.equal([{ id: 1 }, { id: 2 }]);
        });
    });
    describe("merge", () => {
        it("can do nothing when called with null", () => {
            Chai.expect(arrayHelper_1.ArrayHelper.merge(null, null)).to.equal(null);
        });
        it("can do nothing when called with undefined", () => {
            Chai.expect(arrayHelper_1.ArrayHelper.merge(undefined, undefined)).to.equal(undefined);
        });
        it("can return second array when called with undefined first array", () => {
            Chai.expect(arrayHelper_1.ArrayHelper.merge(undefined, [1, 2, 3])).to.deep.equal([1, 2, 3]);
        });
        it("can return first array when called with undefined second array", () => {
            Chai.expect(arrayHelper_1.ArrayHelper.merge([1, 2, 3], undefined)).to.deep.equal([1, 2, 3]);
        });
        it("can return combined when called with two arrays", () => {
            Chai.expect(arrayHelper_1.ArrayHelper.merge([1, 2, 3], [4, 5, 6])).to.deep.equal([1, 2, 3, 4, 5, 6]);
        });
        it("can return combined when called with two arrays and duplicates", () => {
            Chai.expect(arrayHelper_1.ArrayHelper.merge([1, 2, 3], [2, 3, 4])).to.deep.equal([1, 2, 3, 4]);
        });
        it("can return combined when called with a complex sub array first array shorter", () => {
            const obj1 = [
                { m: true, n: [1, 2] }
            ];
            const obj2 = [
                { m: true, n: [2, 3] },
                { m: true, n: [4, 5] }
            ];
            Chai.expect(arrayHelper_1.ArrayHelper.merge(obj1, obj2))
                .to.deep.equal([
                { m: true, n: [1, 2, 3] },
                { m: true, n: [4, 5] }
            ]);
        });
        it("can return combined when called with a complex sub array second array shorter", () => {
            const obj1 = [
                { m: true, n: [1, 2] },
                { m: true, n: [2, 3] }
            ];
            const obj2 = [
                { m: true, n: [4, 5] }
            ];
            Chai.expect(arrayHelper_1.ArrayHelper.merge(obj1, obj2))
                .to.deep.equal([
                { m: true, n: [1, 2, 4, 5] },
                { m: true, n: [2, 3] }
            ]);
        });
    });
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Rlc3QvdW5pdC9zcmMvaGVscGVycy9hcnJheUhlbHBlci5zcGVjLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUE7O0dBRUc7QUFDSCw2QkFBNkI7QUFDN0IscUVBQWtFO0FBRWxFLFFBQVEsQ0FBQyxhQUFhLEVBQUU7SUFDcEIsRUFBRSxDQUFDLGdCQUFnQixFQUFFO1FBQ2pCLE1BQU0sR0FBRyxHQUFHLElBQUkseUJBQVcsRUFBRSxDQUFDO1FBQzlCLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDN0IsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsV0FBVyxFQUFFO1FBQ2xCLEVBQUUsQ0FBQyxnQ0FBZ0MsRUFBRTtZQUNqQyxJQUFJLENBQUMsTUFBTSxDQUFDLHlCQUFXLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzdFLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLHFDQUFxQyxFQUFFO1lBQ3RDLElBQUksQ0FBQyxNQUFNLENBQUMseUJBQVcsQ0FBQyxTQUFTLENBQUMsU0FBUyxFQUFFLFNBQVMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDdkYsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsK0NBQStDLEVBQUU7WUFDaEQsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ3RCLHlCQUFXLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRSxTQUFTLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDNUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FB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QUMsU0FBUyxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxNQUFNLEVBQUUsSUFBSSxLQUFLLE1BQU0sQ0FBQyxFQUFFLEtBQUssSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3JGLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDdEUsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsOENBQThDLEVBQUU7WUFDL0MsTUFBTSxHQUFHLEdBQUcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQzlDLHlCQUFXLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsSUFBSSxLQUFLLE1BQU0sQ0FBQyxFQUFFLEtBQUssSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3RGLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDM0QsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsc0RBQXNELEVBQUU7WUFDdkQsTUFBTSxHQUFHLEdBQUcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUs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QyxJQUFJLENBQUMsS0FBSyxDQUFDO2dCQUNYLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRTtnQkFDNUIsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRTthQUN6QixDQUFDLENBQUM7UUFDWCxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQyxDQUFDLENBQUMiLCJmaWxlIjoiaGVscGVycy9hcnJheUhlbHBlci5zcGVjLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUZXN0cyBmb3IgQXJyYXlIZWxwZXIuXG4gKi9cbmltcG9ydCAqIGFzIENoYWkgZnJvbSBcImNoYWlcIjtcbmltcG9ydCB7IEFycmF5SGVscGVyIH0gZnJvbSBcIi4uLy4uLy4uLy4uL3NyYy9oZWxwZXJzL2FycmF5SGVscGVyXCI7XG5cbmRlc2NyaWJlKFwiQXJyYXlIZWxwZXJcIiwgKCkgPT4ge1xuICAgIGl0KFwiY2FuIGJlIGNyZWF0ZWRcIiwgKCkgPT4ge1xuICAgICAgICBjb25zdCBvYmogPSBuZXcgQXJyYXlIZWxwZXIoKTtcbiAgICAgICAgQ2hhaS5zaG91bGQoKS5leGlzdChvYmopO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoXCJhZGRSZW1vdmVcIiwgKCkgPT4ge1xuICAgICAgICBpdChcImNhbiBmYWlsIHdoZW4gY2FsbGVkIHdpdGggbnVsbFwiLCAoKSA9PiB7XG4gICAgICAgICAgICBDaGFpLmV4cGVjdChBcnJheUhlbHBlci5hZGRSZW1vdmUobnVsbCwgbnVsbCwgdHJ1ZSkpLnRvLmVxdWFsKHVuZGVmaW5lZCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwiY2FuIGZhaWwgd2hlbiBjYWxsZWQgd2l0aCB1bmRlZmluZWRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgQ2hhaS5leHBlY3QoQXJyYXlIZWxwZXIuYWRkUmVtb3ZlKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB0cnVlKSkudG8uZXF1YWwodW5kZWZpbmVkKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJjYW4gZmFpbCB3aGVuIGNhbGxlZCB3aXRoIGFuIGFycmF5IGFuZCBubyBrZXlcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYXJyID0gWzEsIDIsIDNdO1xuICAgICAgICAgICAgQXJyYXlIZWxwZXIuYWRkUmVtb3ZlKGFyciwgdW5kZWZpbmVkLCB0cnVlKTtcbiAgICAgICAgICAgIENoYWkuZXhwZWN0KGFycikudG8uZGVlcC5lcXVhbChbMSwgMiwgM10pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcImNhbiBhZGQgdGhlIGl0ZW0gaWYgbm90IGV4aXN0aW5nXCIsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFyciA9IFsxLCAyXTtcbiAgICAgICAgICAgIEFycmF5SGVscGVyLmFkZFJlbW92ZShhcnIsIDMsIHRydWUpO1xuICAgICAgICAgICAgQ2hhaS5leHBlY3QoYXJyKS50by5kZWVwLmVxdWFsKFsxLCAyLCAzXSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwiY2FuIG5vdCBhZGQgdGhlIGl0ZW0gaWYgYWxyZWFkeSBleGlzdHNcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYXJyID0gWzEsIDIsIDNdO1xuICAgICAgICAgICAgQXJyYXlIZWxwZXIuYWRkUmVtb3ZlKGFyciwgMywgdHJ1ZSk7XG4gICAgICAgICAgICBDaGFpLmV4cGVjdChhcnIpLnRvLmRlZXAuZXF1YWwoWzEsIDIsIDNdKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJjYW4gcmVtb3ZlIHRoZSBpdGVtIGlmIGV4aXN0aW5nXCIsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFyciA9IFsxLCAyLCAzXTtcbiAgICAgICAgICAgIEFycmF5SGVscGVyLmFkZFJlbW92ZShhcnIsIDMsIGZhbHNlKTtcbiAgICAgICAgICAgIENoYWkuZXhwZWN0KGFycikudG8uZGVlcC5lcXVhbChbMSwgMl0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcImNhbiBub3QgcmVtb3ZlIHRoZSBpdGVtIGlmIG5vdCBleGlzdGluZ1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhcnIgPSBbMSwgMl07XG4gICAgICAgICAgICBBcnJheUhlbHBlci5hZGRSZW1vdmUoYXJyLCAzLCBmYWxzZSk7XG4gICAgICAgICAgICBDaGFpLmV4cGVjdChhcnIpLnRvLmRlZXAuZXF1YWwoWzEsIDJdKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJjYW4gYWRkIHRoZSBpdGVtIGlmIG5vdCBleGlzdGluZyB3aXRoIG1hdGNoZXJcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYXJyID0gW3sgaWQ6IDEgfSwgeyBpZDogMiB9XTtcbiAgICAgICAgICAgIEFycmF5SGVscGVyLmFkZFJlbW92ZShhcnIsIHsgaWQ6IDMgfSwgdHJ1ZSwgKG9iamVjdCwgaXRlbSkgPT4gb2JqZWN0LmlkID09PSBpdGVtLmlkKTtcbiAgICAgICAgICAgIENoYWkuZXhwZWN0KGFycikudG8uZGVlcC5lcXVhbChbeyBpZDogMSB9LCB7IGlkOiAyIH0sIHsgaWQ6IDMgfV0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcImNhbiBub3QgYWRkIHRoZSBpdGVtIGlmIGFscmVhZHkgZXhpc3RzIHdpdGggbWF0Y2hlclwiLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhcnIgPSBbeyBpZDogMSB9LCB7IGlkOiAyIH0sIHsgaWQ6IDMgfV07XG4gICAgICAgICAgICBBcnJheUhlbHBlci5hZGRSZW1vdmUoYXJyLCB7IGlkOiAzIH0sIHRydWUsIChvYmplY3QsIGl0ZW0pID0+IG9iamVjdC5pZCA9PT0gaXRlbS5pZCk7XG4gICAgICAgICAgICBDaGFpLmV4cGVjdChhcnIpLnRvLmRlZXAuZXF1YWwoW3sgaWQ6IDEgfSwgeyBpZDogMiB9LCB7IGlkOiAzIH1dKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJjYW4gcmVtb3ZlIHRoZSBpdGVtIGlmIGV4aXN0aW5nIHdpdGggbWF0Y2hlclwiLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhcnIgPSBbeyBpZDogMSB9LCB7IGlkOiAyIH0sIHsgaWQ6IDMgfV07XG4gICAgICAgICAgICBBcnJheUhlbHBlci5hZGRSZW1vdmUoYXJyLCB7IGlkOiAzIH0sIGZhbHNlLCAob2JqZWN0LCBpdGVtKSA9PiBvYmplY3QuaWQgPT09IGl0ZW0uaWQpO1xuICAgICAgICAgICAgQ2hhaS5leHBlY3QoYXJyKS50by5kZWVwLmVxdWFsKFt7IGlkOiAxIH0sIHsgaWQ6IDIgfV0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcImNhbiBub3QgcmVtb3ZlIHRoZSBpdGVtIGlmIG5vdCBleGlzdGluZyB3aXRoIG1hdGNoZXJcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYXJyID0gW3sgaWQ6IDEgfSwgeyBpZDogMiB9XTtcbiAgICAgICAgICAgIEFycmF5SGVscGVyLmFkZFJlbW92ZShhcnIsIHsgaWQ6IDMgfSwgZmFsc2UsIChvYmplY3QsIGl0ZW0pID0+IG9iamVjdC5pZCA9PT0gaXRlbS5pZCk7XG4gICAgICAgICAgICBDaGFpLmV4cGVjdChhcnIpLnRvLmRlZXAuZXF1YWwoW3sgaWQ6IDEgfSwgeyBpZDogMiB9XSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoXCJtZXJnZVwiLCAoKSA9PiB7XG4gICAgICAgIGl0KFwiY2FuIGRvIG5vdGhpbmcgd2hlbiBjYWxsZWQgd2l0aCBudWxsXCIsICgpID0+IHtcbiAgICAgICAgICAgIENoYWkuZXhwZWN0KEFycmF5SGVscGVyLm1lcmdlKG51bGwsIG51bGwpKS50by5lcXVhbChudWxsKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJjYW4gZG8gbm90aGluZyB3aGVuIGNhbGxlZCB3aXRoIHVuZGVmaW5lZFwiLCAoKSA9PiB7XG4gICAgICAgICAgICBDaGFpLmV4cGVjdChBcnJheUhlbHBlci5tZXJnZSh1bmRlZmluZWQsIHVuZGVmaW5lZCkpLnRvLmVxdWFsKHVuZGVmaW5lZCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwiY2FuIHJldHVybiBzZWNvbmQgYXJyYXkgd2hlbiBjYWxsZWQgd2l0aCB1bmRlZmluZWQgZmlyc3QgYXJyYXlcIiwgKCkgPT4ge1xuICAgICAgICAgICAgQ2hhaS5leHBlY3QoQXJyYXlIZWxwZXIubWVyZ2UodW5kZWZpbmVkLCBbMSwgMiwgM10pKS50by5kZWVwLmVxdWFsKFsxLCAyLCAzXSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwiY2FuIHJldHVybiBmaXJzdCBhcnJheSB3aGVuIGNhbGxlZCB3aXRoIHVuZGVmaW5lZCBzZWNvbmQgYXJyYXlcIiwgKCkgPT4ge1xuICAgICAgICAgICAgQ2hhaS5leHBlY3QoQXJyYXlIZWxwZXIubWVyZ2UoWzEsIDIsIDNdLCB1bmRlZmluZWQpKS50by5kZWVwLmVxdWFsKFsxLCAyLCAzXSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwiY2FuIHJldHVybiBjb21iaW5lZCB3aGVuIGNhbGxlZCB3aXRoIHR3byBhcnJheXNcIiwgKCkgPT4ge1xuICAgICAgICAgICAgQ2hhaS5leHBlY3QoQXJyYXlIZWxwZXIubWVyZ2UoWzEsIDIsIDNdLCBbNCwgNSwgNl0pKS50by5kZWVwLmVxdWFsKFsxLCAyLCAzLCA0LCA1LCA2XSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwiY2FuIHJldHVybiBjb21iaW5lZCB3aGVuIGNhbGxlZCB3aXRoIHR3byBhcnJheXMgYW5kIGR1cGxpY2F0ZXNcIiwgKCkgPT4ge1xuICAgICAgICAgICAgQ2hhaS5leHBlY3QoQXJyYXlIZWxwZXIubWVyZ2UoWzEsIDIsIDNdLCBbMiwgMywgNF0pKS50by5kZWVwLmVxdWFsKFsxLCAyLCAzLCA0XSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwiY2FuIHJldHVybiBjb21iaW5lZCB3aGVuIGNhbGxlZCB3aXRoIGEgY29tcGxleCBzdWIgYXJyYXkgZmlyc3QgYXJyYXkgc2hvcnRlclwiLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvYmoxID0gW1xuICAgICAgICAgICAgICAgIHsgbTogdHJ1ZSwgbjogWzEsIDJdIH1cbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBjb25zdCBvYmoyID0gW1xuICAgICAgICAgICAgICAgIHsgbTogdHJ1ZSwgbjogWzIsIDNdIH0sXG4gICAgICAgICAgICAgICAgeyBtOiB0cnVlLCBuOiBbNCwgNV0gfVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIENoYWkuZXhwZWN0KEFycmF5SGVscGVyLm1lcmdlKG9iajEsIG9iajIpKVxuICAgICAgICAgICAgICAgIC50by5kZWVwLmVxdWFsKFtcbiAgICAgICAgICAgICAgICAgICAgeyBtOiB0cnVlLCBuOiBbMSwgMiwgM10gfSxcbiAgICAgICAgICAgICAgICAgICAgeyBtOiB0cnVlLCBuOiBbNCwgNV0gfVxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcImNhbiByZXR1cm4gY29tYmluZWQgd2hlbiBjYWxsZWQgd2l0aCBhIGNvbXBsZXggc3ViIGFycmF5IHNlY29uZCBhcnJheSBzaG9ydGVyXCIsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9iajEgPSBbXG4gICAgICAgICAgICAgICAgeyBtOiB0cnVlLCBuOiBbMSwgMl0gfSxcbiAgICAgICAgICAgICAgICB7IG06IHRydWUsIG46IFsyLCAzXSB9XG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgY29uc3Qgb2JqMiA9IFtcbiAgICAgICAgICAgICAgICB7IG06IHRydWUsIG46IFs0LCA1XSB9XG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgQ2hhaS5leHBlY3QoQXJyYXlIZWxwZXIubWVyZ2Uob2JqMSwgb2JqMikpXG4gICAgICAgICAgICAgICAgLnRvLmRlZXAuZXF1YWwoW1xuICAgICAgICAgICAgICAgICAgICB7IG06IHRydWUsIG46IFsxLCAyLCA0LCA1XSB9LFxuICAgICAgICAgICAgICAgICAgICB7IG06IHRydWUsIG46IFsyLCAzXSB9XG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG4iXX0=
